<!doctype html>
<html>
	<head>
		<title>Javascript Conditionals</title>

		<meta charset="utf-8" />
		<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />

		<style type="text/css">
			#box {
				width: 200px;
				height: 200px;
				border: 1px red;
				background-color: red;
				display: none;
				position: relative;
			}
		</style>
	</head>

	<body>
		<button id="begin">Begin</button>

		<br />
		<p>Your last click took: <span id="lastClick"></span></p>
		<p>Your average click took: <span id="averageClick"></span></p>

		<br /><br />
		<div id="box"></div>

		<script type="text/javascript">
			var box = document.getElementById('box')
			var clickedTime; var createdTime;
			var totalTime = 0; var numClicks = 0;

			function randomlyShowBox() {
				function showBox () {
					// set location
					var posLeft = 1220 * Math.random()
					var posTop = 370 * Math.random()
					box.style.left = posLeft + "px"
					box.style.top = posTop + "px"

					// set circle or square
					var randomNum = Math.random()
					if (randomNum < 0.5) {
						box.style.borderRadius = "50%";
					}
					else {
						box.style.borderRadius = "0";	
					}

					// set color
					function get_random_color() {
						var letters = 'ABCDE'.split('');
						var color = '#';
						for (var i=0; i<3; i++ ) {
							color += letters[Math.floor(Math.random() * letters.length)];
						}
						return color;
					}
					box.style.backgroundColor = get_random_color()

					box.style.display = "block"					
				}

				var mSec = Math.floor( Math.random() * 3000 )
				createdTime = Date.now() + mSec
				setTimeout( showBox, mSec )
			}

			document.getElementById('begin').onclick = function() {
				randomlyShowBox()
			}

			box.onclick = function() {
				this.style.display = "none"

				clickedTime = Date.now()
				var elapsedTime = clickedTime - createdTime
				totalTime += elapsedTime
				numClicks += 1
				var averageTime = totalTime / numClicks

				document.getElementById("lastClick").innerHTML = elapsedTime + " milliseconds"
				document.getElementById("averageClick").innerHTML = averageTime + " milliseconds"

				randomlyShowBox()
			}



		</script>
	</body>
</html>